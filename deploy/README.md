# Deployment Scripts –¥–ª—è Beget.com

–°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Telegram –±–æ—Ç–æ–º –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ Beget.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ Beget

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
git clone https://github.com/nikxcost/tgwhisper.git
cd tgwhisper

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
chmod +x deploy/setup.sh
./deploy/setup.sh

# –ó–∞–ø–æ–ª–Ω–∏—Ç—å API –∫–ª—é—á–∏
nano .env

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å cron (–∑–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç—å –Ω–∞ –≤–∞—à)
crontab -e
# –î–æ–±–∞–≤–∏—Ç—å: */3 * * * * /home/u123456/tgwhisper/deploy/supervisor.sh
```

### 2. –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

üìñ –°–º. [beget.md](../beget.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

## –û–ø–∏—Å–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ

- **supervisor.sh** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –Ω–∞–¥–∑–æ—Ä –∑–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–º (–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è cron –∫–∞–∂–¥—ã–µ 3 –º–∏–Ω—É—Ç—ã)
- **setup.sh** - –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (venv, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- **stop.sh** - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
- **restart.sh** - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
- **check_status.sh** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏ –ª–æ–≥–æ–≤

### –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

- **update.sh** - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ git (backup ‚Üí pull ‚Üí restart)
- **backup.sh** - –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ (–ë–î + –ª–æ–≥–∏ + .env)
- **rotate_logs.sh** - –†–æ—Ç–∞—Ü–∏—è –±–æ–ª—å—à–∏—Ö –ª–æ–≥-—Ñ–∞–π–ª–æ–≤ (>10MB)
- **optimize_db.sh** - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î (VACUUM, –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π)
- **monitor.sh** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤ (–ø–∞–º—è—Ç—å, –¥–∏—Å–∫)

## –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°—Ç–∞—Ç—É—Å
./deploy/check_status.sh

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
./deploy/restart.sh

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
./deploy/update.sh

# –õ–æ–≥–∏
tail -f logs/bot.log

# –ë—ç–∫–∞–ø
./deploy/backup.sh
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ (cron)

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

```cron
*/3 * * * * /–ø—É—Ç—å/–∫/–ø—Ä–æ–µ–∫—Ç—É/deploy/supervisor.sh
0 3 * * * /–ø—É—Ç—å/–∫/–ø—Ä–æ–µ–∫—Ç—É/deploy/backup.sh
0 2 * * * /–ø—É—Ç—å/–∫/–ø—Ä–æ–µ–∫—Ç—É/deploy/rotate_logs.sh
0 1 1 * * /–ø—É—Ç—å/–∫/–ø—Ä–æ–µ–∫—Ç—É/deploy/optimize_db.sh
0 * * * * /–ø—É—Ç—å/–∫/–ø—Ä–æ–µ–∫—Ç—É/deploy/monitor.sh
```
